@{
    ViewData["Title"] = "Update Customer";
}

<script src="~/js/jquery-3.5.1.min.js"></script>
<div class="text-center">
    <h1 class="display-4">Update Customer Form</h1>
    <p></p>
</div>
<script>
    function updateCustomer() {
        var data = {
            company_name: $('#company_name').val(),
            cpy_contact_name: $('#cpy_contact_name').val(),
            cpy_contact_phone: $('#cpy_contact_phone').val(),
            sta_name: $('#sta_name').val(),
            sta_phone: $('#sta_phone').val(),
            sta_mail: $('#sta_mail').val(),
            cpy_description: $('#cpy_description').val(),
            cpy_contact_email: $('#cpy_contact_email').val()
        };

        $.ajax({
            //url: 'http://localhost:5000/api/Customers',
            url: 'https://rocketelevatorsrestapicindy.azurewebsites.net/api/Customers',
            type: 'PUT',
            data: JSON.stringify(data),
            headers: {
                "Access-Control-Allow-Origin": "*", 
                "Access-Control-Allow-Methods": "HEAD, GET, POST, PUT, PATCH, DELETE",
                "Access-Control-Allow-Headers": "Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With",
                'Accept': 'application/json',
                'Content-Type': 'application/json' 
            },
            success: function (result) {
                alert('Customer updated successfully!');
                return false;
            }
        });

        return false;
    }
</script>

<form action="" onsubmit="return updateCustomer();" id="customerForm">
    <div id="quote_form" class="container">
        <div class="row">
            <div id="typeChoice" class="col-md-12 form-group">

                <!-- ************************************* USE OF JAVASCRIPT FOR THE DYNAMIC DROPDOWNS ************************************* -->
                <script>
                    let customer = JSON.parse('@Html.Raw(Json.Serialize(ViewBag.customer))');
                </script>


                <!-- *********************************************** INPUT TEXTS *********************************************** -->
                <!-- ------------ Company Name --------------------------------------------------------------------------- -->
                <label for="company_name">Company Name</label>
                <input required type="text" value="@ViewBag.customer.company_name" class="form-control" name="company_name" id="company_name">
                <br />

                <!-- ------------ Company Contact Name --------------------------------------------------------------------------- -->
                <label for="cpy_contact_name">Company Contact Name</label>
                <input required type="text" value="@ViewBag.customer.cpy_contact_name" class="form-control" name="cpy_contact_name" id="cpy_contact_name">
                <br />

                <!-- ------------ Company Contact Phone --------------------------------------------------------------------------- -->
                <label for="cpy_contact_phone">Company Contact Phone</label>
                <input required type="text" value="@ViewBag.customer.cpy_contact_phone" class="form-control" name="cpy_contact_phone" id="cpy_contact_phone">
                <br />

                <!-- ------------ Support Contact Name --------------------------------------------------------------------------- -->
                <label for="sta_name">Support Contact Name</label>
                <input required type="text" value="@ViewBag.customer.sta_name" class="form-control" name="sta_name" id="sta_name">
                <br />

                <!-- ------------ Support Contact Phone --------------------------------------------------------------------------- -->
                <label for="sta_phone">Support Contact Phone</label>
                <input required type="text" value="@ViewBag.customer.sta_phone" class="form-control" name="sta_phone" id="sta_phone">
                <br />

                <!-- ------------ Support Contact Email --------------------------------------------------------------------------- -->
                <label for="sta_mail">Support Contact Email</label>
                <input required type="text" value="@ViewBag.customer.sta_mail" class="form-control" name="sta_mail" id="sta_mail">
                <br />

                <!-- ------------ Company Description --------------------------------------------------------------------------- -->
                <label for="cpy_description">Company Description</label>
                <input required type="text" value="@ViewBag.customer.cpy_description" class="form-control" name="cpy_description" id="cpy_description">
                <br />

                <input hidden type="text" value="@ViewBag.customer.cpy_contact_email" name="cpy_contact_email" id="cpy_contact_email">


                <div class="row">
                    <!--submit-->
                    <div class="col-md-12">
                        <button type="submit" class="btn btn-primary" id="btnIntervention"><i class="fa fa-check"></i> SUBMIT INTERVENTION</button>
                        <br /><br />
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
